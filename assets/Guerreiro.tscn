[gd_scene load_steps=31 format=3 uid="uid://t4w0t1f5ssj7"]

[ext_resource type="PackedScene" uid="uid://b7d7fnf8ook3k" path="res://KayKit_Adventurers_1.0_FREE/KayKit_Adventurers_1.0_FREE/Characters/gltf/Knight.glb" id="1_m3bpp"]
[ext_resource type="Script" path="res://assets/Guerreiro.cs" id="2_2236o"]
[ext_resource type="Texture2D" uid="uid://bok10n1wb4njb" path="res://KayKit_Adventurers_1.0_FREE/coin.png" id="3_cwouk"]
[ext_resource type="PackedScene" uid="uid://cw7357kya0nm4" path="res://Component/health_component.tscn" id="3_vxj5m"]
[ext_resource type="PackedScene" uid="uid://tlrehmrypgag" path="res://Component/hit_box_component.tscn" id="4_ybihm"]
[ext_resource type="PackedScene" uid="uid://iywg2hxupo3j" path="res://Component/damage_component.tscn" id="5_f3ius"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e4hjf"]
animation = &"1H_Melee_Attack_Slice_Diagonal"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_52iw5"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rr86h"]
animation = &"Running_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rpipw"]
animation = &"Walking_Backwards"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mgrbc"]
animation = &"Running_Strafe_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_02wap"]
animation = &"Running_Strafe_Right"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_un8t0"]
blend_point_0/node = SubResource("AnimationNodeAnimation_52iw5")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_rr86h")
blend_point_1/pos = Vector2(0, 1)
blend_point_2/node = SubResource("AnimationNodeAnimation_rpipw")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_mgrbc")
blend_point_3/pos = Vector2(-1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_02wap")
blend_point_4/pos = Vector2(1, 0)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yb2w5"]
animation = &"Jump_Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rdpmu"]
animation = &"Jump_Land"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b1bc7"]
animation = &"Jump_Start"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kytxr"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dbw8j"]
switch_mode = 2
advance_mode = 2

[sub_resource type="CSharpScript" id="CSharpScript_gcwhp"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2372s"]
advance_mode = 2
advance_condition = &"onGround"
script = SubResource("CSharpScript_gcwhp")

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qr6js"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bevi3"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2
advance_condition = &"onGround"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a8x6t"]
xfade_time = 0.5
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_tplb7"]
states/Atacando/node = SubResource("AnimationNodeAnimation_e4hjf")
states/Atacando/position = Vector2(454, 5)
states/IWR/node = SubResource("AnimationNodeBlendSpace2D_un8t0")
states/IWR/position = Vector2(589, 100)
states/Jump_Idle/node = SubResource("AnimationNodeAnimation_yb2w5")
states/Jump_Idle/position = Vector2(597, 273)
states/Jump_Land/node = SubResource("AnimationNodeAnimation_rdpmu")
states/Jump_Land/position = Vector2(728, 178)
states/Jump_Start/node = SubResource("AnimationNodeAnimation_b1bc7")
states/Jump_Start/position = Vector2(405, 206)
transitions = ["Start", "IWR", SubResource("AnimationNodeStateMachineTransition_kytxr"), "Jump_Start", "Jump_Idle", SubResource("AnimationNodeStateMachineTransition_dbw8j"), "Jump_Idle", "Jump_Land", SubResource("AnimationNodeStateMachineTransition_2372s"), "Jump_Land", "IWR", SubResource("AnimationNodeStateMachineTransition_qr6js"), "Atacando", "IWR", SubResource("AnimationNodeStateMachineTransition_bevi3"), "Atacando", "Jump_Idle", SubResource("AnimationNodeStateMachineTransition_a8x6t")]
graph_offset = Vector2(148, 66)

[sub_resource type="Theme" id="Theme_uvikq"]
Label/colors/font_color = Color(1, 1, 1, 1)
Label/colors/font_outline_color = Color(0, 0, 0, 1)
Label/constants/outline_size = 14
Label/font_sizes/font_size = 30

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_6t716"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_hh8pf"]
bg_color = Color(1, 0.101961, 0, 1)

[sub_resource type="Theme" id="Theme_dgvin"]
ProgressBar/styles/background = SubResource("StyleBoxFlat_6t716")
ProgressBar/styles/fill = SubResource("StyleBoxFlat_hh8pf")

[sub_resource type="BoxShape3D" id="BoxShape3D_h025v"]
size = Vector3(1, 2.07977, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_a8707"]
size = Vector3(2.31401, 2.06243, 1.7559)

[node name="Knight" instance=ExtResource("1_m3bpp")]
collision_layer = 2
collision_mask = 33
script = ExtResource("2_2236o")

[node name="Rig" parent="." index="0"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Rig" index="0"]
bones/1/position = Vector3(0, 0.505664, 0)
bones/4/rotation = Quaternion(-0.664961, -0.342638, -0.371776, 0.549736)
bones/5/rotation = Quaternion(1.73128e-08, -4.91943e-08, -0.565066, 0.825046)
bones/7/rotation = Quaternion(-0.0903297, 0.0475687, 0.490328, 0.865538)
bones/14/rotation = Quaternion(-0.648873, 0.371761, 0.396845, 0.532232)
bones/15/rotation = Quaternion(1.89229e-08, 5.5888e-08, 0.503737, 0.863857)
bones/17/rotation = Quaternion(-0.019009, -0.0926946, -0.456722, 0.884563)
bones/24/rotation = Quaternion(0.950662, 0.0237117, 0.0259239, 0.308232)
bones/25/rotation = Quaternion(0.608791, 5.14425e-08, -4.22413e-07, 0.79333)
bones/26/rotation = Quaternion(-0.363618, -0.0475206, 0.0176469, 0.930168)
bones/28/rotation = Quaternion(0.900569, -0.0288551, -0.0415207, 0.431763)
bones/29/rotation = Quaternion(0.81427, -4.17152e-08, 5.67587e-07, 0.580487)
bones/30/rotation = Quaternion(-0.593811, 0.0506598, -0.0444155, 0.801779)
bones/33/position = Vector3(0.210945, 0.0588607, 0.163613)
bones/33/rotation = Quaternion(-0.420781, 0.0183716, 0.0395617, 0.906113)
bones/34/rotation = Quaternion(7.10544e-15, -1.49012e-08, 1, 1.05879e-22)
bones/35/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/37/rotation = Quaternion(1, -1.69494e-15, 1.94009e-07, 1.86265e-09)
bones/40/position = Vector3(-0.210945, 0.16799, 0.225909)
bones/40/rotation = Quaternion(-0.511457, -0.0223308, -0.0374699, 0.858201)
bones/41/rotation = Quaternion(7.10544e-15, -1.38321e-22, 1, -2.33983e-34)
bones/42/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/47/position = Vector3(0.620841, 1.16414, 0.0512295)
bones/47/rotation = Quaternion(0.634877, 0.311373, 0.477453, -0.521551)
bones/49/position = Vector3(-0.639244, 1.16225, 0.0597369)
bones/49/rotation = Quaternion(-0.58593, 0.348826, 0.456309, 0.571654)

[node name="1H_Sword_Offhand" parent="Rig/Skeleton3D" index="0"]
transform = Transform3D(-0.893399, 0.35017, 0.281454, 0.262062, -0.102665, 0.959574, 0.364911, 0.931042, -4.52471e-05, 0.755617, 1.08031, 0.0762044)
visible = false
bone_idx = 9

[node name="Badge_Shield" parent="Rig/Skeleton3D" index="1"]
transform = Transform3D(-0.893399, 0.350172, 0.281454, 0.262061, -0.102666, 0.959574, 0.364913, 0.931041, -4.48111e-05, 0.799492, 1.22989, 0.0761974)
bone_idx = 10

[node name="Rectangle_Shield" parent="Rig/Skeleton3D" index="2"]
transform = Transform3D(-0.893399, 0.350172, 0.281454, 0.262061, -0.102666, 0.959574, 0.364913, 0.931041, -4.48111e-05, 0.799492, 1.22989, 0.0761974)
visible = false
bone_idx = 11

[node name="Round_Shield" parent="Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.893399, 0.350172, 0.281454, 0.262061, -0.102666, 0.959574, 0.364913, 0.931041, -4.48111e-05, 0.799492, 1.22989, 0.0761974)
visible = false
bone_idx = 12

[node name="Spike_Shield" parent="Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.893399, 0.350172, 0.281454, 0.262061, -0.102666, 0.959574, 0.364913, 0.931041, -4.48111e-05, 0.799492, 1.22989, 0.0761974)
visible = false
bone_idx = 13

[node name="1H_Sword" parent="Rig/Skeleton3D" index="5"]
transform = Transform3D(0.930476, -0.340204, 0.135915, 0.103065, -0.112927, -0.988243, 0.351554, 0.933545, -0.0700126, -0.793598, 1.08925, 0.0939676)
bone_idx = 19

[node name="2H_Sword" parent="Rig/Skeleton3D" index="6"]
transform = Transform3D(0.930476, -0.340204, 0.135915, 0.103065, -0.112927, -0.988243, 0.351554, 0.933545, -0.0700126, -0.793598, 1.08925, 0.0939676)
visible = false
bone_idx = 20

[node name="Knight_Helmet" parent="Rig/Skeleton3D" index="7"]
transform = Transform3D(1, -2.20965e-22, 1.69407e-21, 2.20965e-22, 1, 0, -1.69407e-21, 3.58732e-43, 1, 4.76837e-07, 1.31589, -1.08542e-07)
bone_idx = 22

[node name="Knight_Cape" parent="Rig/Skeleton3D" index="8"]
transform = Transform3D(1, 1.25214e-21, 0, -1.25214e-21, 1, 7.17465e-43, 0, 0, 1, 0, 1.31589, -1.4066e-07)
bone_idx = 23

[node name="AnimationState" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_tplb7")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/onGround = false
parameters/IWR/blend_position = Vector2(0.026484, 0.198276)

[node name="SpringArm3D" type="SpringArm3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 0.930443, 0.366436, 0, -0.366436, 0.930443, 0.00732875, 2.19503, 0.568526)
spring_length = 3.2

[node name="Camera3D" type="Camera3D" parent="SpringArm3D" index="0"]
transform = Transform3D(1, 3.75554e-08, 1.70033e-07, -1.57245e-08, 0.991952, -0.126614, -1.7342e-07, 0.126614, 0.991952, 0, 0, 0)

[node name="Moedas" type="Label" parent="." index="4"]
offset_left = 93.0
offset_top = 583.0
offset_right = 514.0
offset_bottom = 631.0
theme = SubResource("Theme_uvikq")
text = "0"

[node name="Sprite2D" type="Sprite2D" parent="Moedas" index="0"]
position = Vector2(-27, 22)
scale = Vector2(0.0791016, 0.0791016)
texture = ExtResource("3_cwouk")

[node name="HealthComponent" parent="." index="5" node_paths=PackedStringArray("lifeBar") instance=ExtResource("3_vxj5m")]
vida = 50
vidaMaxima = 50
lifeBar = NodePath("CanvasLayer/ProgressBar")

[node name="CanvasLayer" type="CanvasLayer" parent="HealthComponent" index="0"]

[node name="ProgressBar" type="ProgressBar" parent="HealthComponent/CanvasLayer" index="0"]
offset_left = 28.0
offset_top = 16.0
offset_right = 452.0
offset_bottom = 48.0
theme = SubResource("Theme_dgvin")

[node name="hitBox_component" parent="." index="6" node_paths=PackedStringArray("health") instance=ExtResource("4_ybihm")]
collision_layer = 2
collision_mask = 24
health = NodePath("../HealthComponent")

[node name="HitBox Colision" type="CollisionShape3D" parent="hitBox_component" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.11237, -0.204792)
shape = SubResource("BoxShape3D_h025v")

[node name="Damage_Component" parent="." index="7" instance=ExtResource("5_f3ius")]
collision_layer = 4

[node name="HitBox Colision" type="CollisionShape3D" parent="Damage_Component" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.11237, -1.1356)
shape = SubResource("BoxShape3D_a8707")
disabled = true

[node name="Physics Colision" type="CollisionShape3D" parent="." index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.14277, -0.204792)
shape = SubResource("BoxShape3D_h025v")

[connection signal="animation_finished" from="AnimationState" to="." method="_on_animation_state_animation_finished"]
[connection signal="empty" from="HealthComponent" to="." method="dead"]
