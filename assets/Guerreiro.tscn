[gd_scene load_steps=26 format=3 uid="uid://t4w0t1f5ssj7"]

[ext_resource type="PackedScene" uid="uid://b7d7fnf8ook3k" path="res://KayKit_Adventurers_1.0_FREE/KayKit_Adventurers_1.0_FREE/Characters/gltf/Knight.glb" id="1_m3bpp"]
[ext_resource type="Script" path="res://assets/Guerreiro.cs" id="2_2236o"]
[ext_resource type="PackedScene" uid="uid://cw7357kya0nm4" path="res://Component/health_component.tscn" id="3_vxj5m"]
[ext_resource type="PackedScene" uid="uid://tlrehmrypgag" path="res://Component/hit_box_component.tscn" id="4_ybihm"]
[ext_resource type="PackedScene" uid="uid://iywg2hxupo3j" path="res://Component/damage_component.tscn" id="5_f3ius"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e4hjf"]
animation = &"1H_Melee_Attack_Slice_Diagonal"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_52iw5"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rr86h"]
animation = &"Running_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rpipw"]
animation = &"Walking_Backwards"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mgrbc"]
animation = &"Running_Strafe_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_02wap"]
animation = &"Running_Strafe_Right"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_un8t0"]
blend_point_0/node = SubResource("AnimationNodeAnimation_52iw5")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_rr86h")
blend_point_1/pos = Vector2(0, 1)
blend_point_2/node = SubResource("AnimationNodeAnimation_rpipw")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_mgrbc")
blend_point_3/pos = Vector2(-1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_02wap")
blend_point_4/pos = Vector2(1, 0)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yb2w5"]
animation = &"Jump_Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rdpmu"]
animation = &"Jump_Land"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b1bc7"]
animation = &"Jump_Start"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kytxr"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dbw8j"]
switch_mode = 2
advance_mode = 2

[sub_resource type="CSharpScript" id="CSharpScript_gcwhp"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2372s"]
advance_mode = 2
advance_condition = &"onGround"
script = SubResource("CSharpScript_gcwhp")

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qr6js"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bevi3"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2
advance_condition = &"onGround"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a8x6t"]
xfade_time = 0.5
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_tplb7"]
states/Atacando/node = SubResource("AnimationNodeAnimation_e4hjf")
states/Atacando/position = Vector2(454, 5)
states/IWR/node = SubResource("AnimationNodeBlendSpace2D_un8t0")
states/IWR/position = Vector2(589, 100)
states/Jump_Idle/node = SubResource("AnimationNodeAnimation_yb2w5")
states/Jump_Idle/position = Vector2(597, 273)
states/Jump_Land/node = SubResource("AnimationNodeAnimation_rdpmu")
states/Jump_Land/position = Vector2(727, 178)
states/Jump_Start/node = SubResource("AnimationNodeAnimation_b1bc7")
states/Jump_Start/position = Vector2(404, 206)
transitions = ["Start", "IWR", SubResource("AnimationNodeStateMachineTransition_kytxr"), "Jump_Start", "Jump_Idle", SubResource("AnimationNodeStateMachineTransition_dbw8j"), "Jump_Idle", "Jump_Land", SubResource("AnimationNodeStateMachineTransition_2372s"), "Jump_Land", "IWR", SubResource("AnimationNodeStateMachineTransition_qr6js"), "Atacando", "IWR", SubResource("AnimationNodeStateMachineTransition_bevi3"), "Atacando", "Jump_Idle", SubResource("AnimationNodeStateMachineTransition_a8x6t")]
graph_offset = Vector2(-8, 46)

[sub_resource type="BoxShape3D" id="BoxShape3D_h025v"]
size = Vector3(1, 2.07977, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_a8707"]
size = Vector3(2.31401, 2.06243, 1.7559)

[node name="Knight" instance=ExtResource("1_m3bpp")]
collision_layer = 2
script = ExtResource("2_2236o")

[node name="Rig" parent="." index="0"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Rig" index="0"]
bones/0/position = Vector3(0, 0.00917944, 0)
bones/0/rotation = Quaternion(-4.77186e-10, -0.0138664, -8.26511e-10, 0.999904)
bones/1/position = Vector3(1.12164e-23, 0.397889, -4.7045e-17)
bones/1/rotation = Quaternion(0.0217993, 0.0335972, 0.00111743, 0.999197)
bones/2/rotation = Quaternion(0.026084, -0.0170429, 0.000658779, 0.999514)
bones/3/rotation = Quaternion(0.0103967, 0.00379017, -0.00364216, 0.999932)
bones/4/position = Vector3(0.207012, 0.129487, -0.00968217)
bones/4/rotation = Quaternion(-0.626576, -0.0833996, -0.58317, 0.510255)
bones/5/rotation = Quaternion(-5.87808e-09, -5.44958e-08, -0.475883, 0.879509)
bones/7/rotation = Quaternion(-0.272863, -0.351435, 0.0429189, 0.894537)
bones/8/rotation = Quaternion(-0.0112491, 0.009186, -0.662748, 0.748702)
bones/14/position = Vector3(-0.211242, 0.131605, -0.0108247)
bones/14/rotation = Quaternion(-0.655812, 0.107673, 0.595336, 0.451543)
bones/15/rotation = Quaternion(-5.27159e-09, 4.20254e-08, 0.52349, 0.852032)
bones/17/rotation = Quaternion(-0.25583, 0.320845, -0.142518, 0.900721)
bones/18/rotation = Quaternion(-0.0100365, -0.0109207, 0.668044, 0.743974)
bones/21/rotation = Quaternion(-0.0289787, -0.00381126, -0.00353302, 0.999566)
bones/24/position = Vector3(0.170945, 0.113587, -0.0223397)
bones/24/rotation = Quaternion(0.995777, 0.063773, 0.0585572, 0.0305397)
bones/25/rotation = Quaternion(0.345016, 6.38587e-08, -2.40419e-07, 0.938597)
bones/26/rotation = Quaternion(-0.469643, -0.157072, 0.0535334, 0.867121)
bones/27/rotation = Quaternion(-1.94622e-08, 0.91886, -0.394583, 6.62943e-08)
bones/28/position = Vector3(-0.170945, 0.113587, 0.0223397)
bones/28/rotation = Quaternion(0.985608, -0.0273746, 0.0210547, 0.16548)
bones/29/rotation = Quaternion(0.286154, -6.42386e-08, 1.984e-07, 0.958184)
bones/30/rotation = Quaternion(-0.580555, 0.0887343, -0.00689393, 0.809342)
bones/31/rotation = Quaternion(3.05016e-08, 0.920355, -0.391084, -6.9574e-08)
bones/32/position = Vector3(0.170945, 0.293831, 0.577333)
bones/32/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/33/position = Vector3(0.195161, 0.0511107, 0.0525422)
bones/33/rotation = Quaternion(-0.534625, -8.33634e-08, -5.41052e-08, 0.845089)
bones/34/rotation = Quaternion(7.5015e-09, 1.38221e-09, 0.991409, -0.130798)
bones/35/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/37/rotation = Quaternion(1, 3.93928e-10, 1.94714e-07, 4.93304e-11)
bones/39/position = Vector3(-0.170945, 0.293831, 0.577333)
bones/39/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/40/position = Vector3(-0.170945, 0.0985482, 0.325032)
bones/40/rotation = Quaternion(-0.772297, -6.48606e-08, -7.59662e-08, 0.635262)
bones/41/rotation = Quaternion(-4.52735e-09, 4.99473e-10, 0.996879, 0.07894)
bones/42/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/44/rotation = Quaternion(1, 4.52052e-10, 1.94852e-07, -1.97321e-10)
bones/46/position = Vector3(0.447009, 1.06181, -0.614086)
bones/46/rotation = Quaternion(-0.707099, 0.0032684, 0.0032684, 0.707099)
bones/47/position = Vector3(0.519196, 0.791184, -0.0213874)
bones/47/rotation = Quaternion(0.825554, 0.109635, 0.553067, 0.0236132)
bones/48/position = Vector3(-0.470309, 1.05651, -0.592211)
bones/48/rotation = Quaternion(-0.707099, 0.0032684, 0.0032684, 0.707099)
bones/49/position = Vector3(-0.508011, 0.791184, 0.0844529)
bones/49/rotation = Quaternion(-0.794806, 0.107256, 0.596467, -0.0317143)

[node name="1H_Sword_Offhand" parent="Rig/Skeleton3D" index="0"]
transform = Transform3D(-0.141257, 0.286437, 0.947628, 0.988128, 0.099199, 0.11731, -0.0604015, 0.952949, -0.297049, 0.556719, 0.669438, 0.0486014)
visible = false
bone_idx = 9

[node name="Badge_Shield" parent="Rig/Skeleton3D" index="1"]
transform = Transform3D(-0.141257, 0.286437, 0.947628, 0.988128, 0.0991964, 0.117311, -0.0603989, 0.952949, -0.297049, 0.70444, 0.687725, 0.00229573)
bone_idx = 10

[node name="Rectangle_Shield" parent="Rig/Skeleton3D" index="2"]
transform = Transform3D(-0.141257, 0.286437, 0.947628, 0.988128, 0.0991964, 0.117311, -0.0603989, 0.952949, -0.297049, 0.70444, 0.687725, 0.00229573)
visible = false
bone_idx = 11

[node name="Round_Shield" parent="Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.141257, 0.286437, 0.947628, 0.988128, 0.0991964, 0.117311, -0.0603989, 0.952949, -0.297049, 0.70444, 0.687725, 0.00229573)
visible = false
bone_idx = 12

[node name="Spike_Shield" parent="Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.141257, 0.286437, 0.947628, 0.988128, 0.0991964, 0.117311, -0.0603989, 0.952949, -0.297049, 0.70444, 0.687725, 0.00229573)
visible = false
bone_idx = 13

[node name="1H_Sword" parent="Rig/Skeleton3D" index="5"]
transform = Transform3D(0.116016, -0.214203, 0.969874, 0.989778, 0.106464, -0.0948836, -0.0829318, 0.970969, 0.224366, -0.526004, 0.66186, 0.15684)
bone_idx = 19

[node name="2H_Sword" parent="Rig/Skeleton3D" index="6"]
transform = Transform3D(0.116016, -0.214203, 0.969874, 0.989778, 0.106464, -0.0948836, -0.0829318, 0.970969, 0.224366, -0.526004, 0.66186, 0.15684)
visible = false
bone_idx = 20

[node name="Knight_Helmet" parent="Rig/Skeleton3D" index="7"]
transform = Transform3D(0.999912, 0.0118745, 0.00596164, -0.0115054, 0.998219, -0.0585338, -0.00664608, 0.05846, 0.998268, -3.70774e-05, 1.21361, 0.0739997)
bone_idx = 22

[node name="Knight_Cape" parent="Rig/Skeleton3D" index="8"]
transform = Transform3D(0.9999, 0.00535829, 0.0130871, -0.00379988, 0.993204, -0.116326, -0.0136215, 0.116265, 0.993125, 0.000128832, 1.21374, 0.0725237)
bone_idx = 23

[node name="AnimationState" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_tplb7")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/conditions/onGround = false
parameters/IWR/blend_position = Vector2(0.026484, 0.198276)

[node name="SpringArm3D" type="SpringArm3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 0.930443, 0.366436, 0, -0.366436, 0.930443, 0.00732875, 2.19503, 0.568526)
spring_length = 3.2

[node name="Camera3D" type="Camera3D" parent="SpringArm3D" index="0"]
transform = Transform3D(1, 3.75554e-08, 1.70033e-07, -1.57245e-08, 0.991952, -0.126614, -1.7342e-07, 0.126614, 0.991952, 0, 0, 0)

[node name="Moedas" type="Label" parent="." index="4"]
modulate = Color(0, 0, 0, 1)
self_modulate = Color(0.45098, 0.45098, 0, 1)
offset_left = 12.0
offset_top = 582.0
offset_right = 433.0
offset_bottom = 630.0
text = "Moedas = 0"

[node name="HealthComponent" parent="." index="5" node_paths=PackedStringArray("lifeBar") instance=ExtResource("3_vxj5m")]
vida = 50
vidaMaxima = 50
lifeBar = NodePath("CanvasLayer/ProgressBar")

[node name="CanvasLayer" type="CanvasLayer" parent="HealthComponent" index="0"]

[node name="ProgressBar" type="ProgressBar" parent="HealthComponent/CanvasLayer" index="0"]
offset_right = 949.0
offset_bottom = 74.0

[node name="hitBox_component" parent="." index="6" node_paths=PackedStringArray("health") instance=ExtResource("4_ybihm")]
collision_layer = 2
collision_mask = 24
health = NodePath("../HealthComponent")

[node name="HitBox Colision" type="CollisionShape3D" parent="hitBox_component" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.11237, -0.204792)
shape = SubResource("BoxShape3D_h025v")

[node name="Damage_Component" parent="." index="7" instance=ExtResource("5_f3ius")]
collision_layer = 4

[node name="HitBox Colision" type="CollisionShape3D" parent="Damage_Component" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.11237, -1.1356)
shape = SubResource("BoxShape3D_a8707")

[node name="Physics Colision" type="CollisionShape3D" parent="." index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0140319, 1.14277, -0.204792)
shape = SubResource("BoxShape3D_h025v")

[connection signal="empty" from="HealthComponent" to="." method="dead"]
